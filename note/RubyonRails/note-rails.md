### MVC
---
|コンポーネント（構成要素）|説明|備考|
|:--|:--|:--|
|Model（モデル）|データベースを取り扱う|データベースへの格納方法は、Modelに隠ぺいする|
|View（ビュー）|画面表示を取り扱う|表示方法は、Viewに隠ぺいする|
|Controller（コントローラー）|（ユーザーの入力を受けて）ModelとViewにアレコレ指示する|データベースへの格納方法や表示方法は知らない|

### 1.Railsアプリケーションの準備
---
  ターミナルで「`rails new アプリケーション名`」というコマンドをターミナルで実行する。

### 2.サーバを立ち上げる
---
  ターミナルで「`rails server`」というコマンドを実行する
  サーバー起動後にブラウザで「localhost:3000」というURLにアクセスすると初期画面が出たら成功。
  サーバー用のターミナルは閉じたらいけない


---
### 3.トップページ自動生成
---
  ターミナルで「`rails generate controller home top`」というコマンドを実行。
  URL「localhost:3000/home/top」にアクセスできるようになる
  genarate は g に省略できる

### 4.「view」
---
ファイルのHTMLを変更してtopページを作り替える

### 5.「controller」のアクションを確認する。
  app/controllers/controller.rb

### 6.「rouring」
  URLに対して「どのコントローラのどのアクション」で処理するか決める対応表
  「get "URL" => "コントローラー名#アクション名"」とという文法
  「"URL"」のURLを変更するとURLが変わる
  「get "URL" to: "コントローラ名#アクション名"」の方がいいかも

### 7.別ページを作る
  コマンドは最初しか使えないため、ルーティングとアクションを追加する
  別ページのファイルを作る
  別ページに飛ぶリンクを作る

### 8.投稿ページを作る
  投稿ページ用の「postsコントローラ」を作る
  一覧ページは「index」アクションが一般的なのでアクションとコントローラを作る
  「rails g controller posts index」をターミナルで実行して作成する

### 9.html内でrubyコードを使う
  ブラウザに表示させない変数の定義などは<% 変数 = "" %>
  ブラウザに表示させる場合は<%= 変数 %>
  で囲む

### 10.変数を定義する
  変数の定義は基本コントローラでする
  /コントローラ/アクション内で定義してviewに渡す
  アクション内で変数の前に＠をつけて定義する
  ＠をつけることでviewファイルに渡すことができる特殊な変数になる

### 11.データベース
  マイグレーションファイル＝データベースに変更を指示する為のファイル
  「`rails g model モデル名 カラム名:データ型`」でコマンドを実行して作成する。
  テーブル名は単数形にする。
  このコマンドによって「app/models」と「db/migrate」フォルダにマイグレーションファイルが作成される。

### 12.テーブルを作成する
  マイグレーションフォルダを作成した後に「reils db:migrate」を実行してテーブルを作成する

### 13.モデルを使ってデータベースを使う
  「ApplivationRecord」を継承したクラスをモデルと呼ぶ

### 14.「rails console」コマンドを実行してrubyを使えるようにする
  rubyを使ってデータベースにデータを追加していく。
  quitを実行するとコンソールを終了することができる。

### 15.テーブルにデータを追加をする
  ①newメソッドでpostモデルのインスタントを作成
    「rails console」でcontentが「Hello World」のインスタンスを作成する
  ②postsテーブルに保存
    「モデル.save」

### 16.テーブルからデータを取り出す
  テーブルの最初のデータを取り出す「インスタンス名.first」
  全部取り出す「インスタンス名.all」
  インデックス番号で指定する「インスタンス名.all[インデックス番号]」

### 17.共通のレイアウトはapplication.html.erbに書いて統一する

### 18.link
「`<a>`」じゃなくて「`<%= link_to("リンク名", "リンクのURL") %>`」を使う

**find_by**
  `モデル名.find_by(カラム名: 値)`でその値を持ったデータをデータベースから検索して取得する
**where**
`モデル名.where(カラム名: 値)`その値をもつすべてのレコードを取得する

params = パラメータ（ユーザがサーバに対して送ってきた値）を格納する箱
```ruby
  <%= link_to("params","https://qiita.com/tomoharutt/items/46e6358acc8b45cd7db1") %>
```

### find_byとparamsが合体した場合
  モデル名.find.by(カラム名: params[値]) ＝ ユーザが選択した値をモデルのカラムから検索して取得する

### createアクションを追加する

フォームの値を受け取る場合にcreateアクションのルーティングを行う場合は「get」ではなく「post」にする

フォームの送信先は「`form_tag("送信先のURL") do`」で指定する（postで指定したURL）

フォームを他のURLに転送（リダイレクト）する場合は「`redirect_to(転送先のURL)`」をアクションに追加する

contentの編集=上書き()=例
  編集したいidを取得して変数に代入する（`post = Post.find_by(id:1)`）
  変数のcontentに任意の値を代入する（`post.content = "任意の値"`）
  保存（`post.save`）

contentの削除
  削除したい値を変数に代入して (`post = Post.find_by(id:2)`)
  destroyメソッドをしようして削除する (`post.destroy`)

エラーメッセージ
```ruby
  <%= @post.errors.full_messages.each do |message| %>
    <div class="form-error">
      <%= message %>
    </div>
  <% end %>
```

### テーブルにカラムを追加
- **マイグレーションファイルを作る**
ターミナルで「`rails g migration add_カラム名_to_モデル名`」を実行してマイグレーションファイルを作る
※モデル名は複数形
- **マイグレーションを変更**
「`add_colmun :テーブル名, :カラム名, :データ型`」を追加する
- **テーブルにカラムを追加する**
変更後にターミナルで「`rails db:migrate`」を実行する

<!-- ### インスタンスメソッド
modelに定義したメソットを呼出す -->

<!-- ### アクセスの制限 -->

### to_ method
to_s はデータを文字列(string)に変換します
to_i はデータを整数(integer)に変換します
to_a はデータを配列(array)に変換します